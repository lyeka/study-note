# 入门

## Go 包

Go 语言代码通过包（package）来组织，包类似与其他语言里面的库（library）或则模块（modules）。一个包由位于单个目录下的一个或者多个`.go`源代码文件组成（单个目录内不能有两个包）

main包下的main函数为Go 程序的入口。

## Go换行

Go不需要在语句以及声明的末尾添加分号，除非一行有多条语句。

Go编译器会自动将特定符号后面的换行符装换为分号，包括（行末是标识符、整数、浮点数、虚数、字符或字符串文字、关键字`break`、`continue`、`fallthrough`或`return`中的一个、运算符和分隔符`++`、`--`、`)`、`]`或`}`中的一个）



## 语句与表达式

表达式（expression）总有值，而语句（statement）不总有

在Go中，i++是语句，不可以放在赋值语句右边



## 四种变量声明方式

```go
s := ""
var s string
var s = ""
var s string = ""
```

第一种为短变量声明形式，简洁但只能在函数内部使用

第二种声明变量会将变量吃初始化为零值

其余形式冗余了，实践中一般使用前两种形式中的某个，初始值重要的话就显式地指定变量的类型，否则使用隐式初始化。

## 函数传值

Go中的传参是以值的形式传递，函数接收的是参数的copy（副本）。所以如果不是引用类型（如slice，map，channel）的传参的话，参数在函数内部的变化不会在其调用者体现。

在fmt中可以使用`%p`打印变量的内存地址



## 为什么http.Handler中`ResponseWriter`是一个值，而`Request`是一个指针

`ResponseWriter`实际上是一个接口，其背后的实现就是`http.response`的指针，至于为什么`http.response`被设计成不可导出以及为什么是指针实现接口暂时还未搞懂。

`Request`指向的一个`http.Requset`结构体，为啥需要指针呢？

有两点说法

- 服务器需要改变http请求（场景？）
- http请求如果需要很多中间件处理的话，传结构体值copy副本消耗较大

参考：https://stackoverflow.com/questions/13255907/in-go-http-handlers-why-is-the-responsewriter-a-value-but-the-request-a-pointer



## Go中的指针

> Go语言提供了指针。指针是一种直接存储了变量的内存地址的数据类型。在其它语言中，比如C语言，指针操作是完全不受约束的。在另外一些语言中，指针一般被处理为“引用”，除了到处传递这些指针之外，并不能对这些指针做太多事情。Go语言在这两种范围中取了一种平衡。指针是可见的内存地址，&操作符可以返回一个变量的内存地址，并且*操作符可以获取指针指向的变量内容，但是在Go语言里没有指针运算，也就是不能像c语言里可以对指针进行加或减操作。